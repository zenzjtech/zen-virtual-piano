appId: com.zenvirtualpiano.app
productName: Zen Virtual Piano

# --- SIGNING CONFIGURATION (Must be at Root) ---
cscLink: ./zen-piano.pfx 
cscKeyPassword: "1"

directories:
  buildResources: build
files:
  - '!**/.vscode/*'
  - '!src/*'
  - '!electron.vite.config.{js,ts,mjs,cjs}'
  - '!{.eslintcache,eslint.config.mjs,.prettierignore,.prettierrc.yaml,dev-app-update.yml,CHANGELOG.md,README.md}'
  - '!{.env,.env.*,.npmrc,pnpm-lock.yaml}'
  - '!{tsconfig.json,tsconfig.node.json,tsconfig.web.json}'
extraResources:
  - from: '../src/assets/audio'
    to: 'assets/audio'
    filter:
      - '**/*.mp3'
  - from: 'public/data'
    to: 'data'
    filter:
      - '**/*.json'
asarUnpack:
  - resources/**
win:  
  target:
    - nsis # Keep this for your website download
    - appx # Add this for the Microsoft Store
  executableName: zen-virtual-piano
  signtoolOptions:
    timeStampServer: ""
    rfc3161TimeStampServer: ""
nsis:
  artifactName: ${name}-${version}-setup.${ext}
  shortcutName: ${productName}
  uninstallDisplayName: ${productName}
  createDesktopShortcut: always
appx:
  applicationId: MyZenPiano # No dots, alphanumeric only
  identityName: ZenAnalytics.MyZenPiano # From Partner Center
  publisher: "CN=9DD5AD16-13C7-490B-A030-7201866AD654" # From Partner Center
  publisherDisplayName: "Zen Analytics" # From Partner Center
  displayName: "Zen Virtual Piano"
  backgroundColor: "#FFFBF2"
  showNameOnTiles: true
  languages: ["en-US"]  
mac:
  entitlementsInherit: build/entitlements.mac.plist
  extendInfo:
    - NSCameraUsageDescription: Application requests access to the device's camera.
    - NSMicrophoneUsageDescription: Application requests access to the device's microphone.
    - NSDocumentsFolderUsageDescription: Application requests access to the user's Documents folder.
    - NSDownloadsFolderUsageDescription: Application requests access to the user's Downloads folder.
  notarize: false
dmg:
  artifactName: ${name}-${version}.${ext}
linux:
  target:
    - deb
    - snap
  maintainer: zen-piano.web.app
  category: Music
snap:
  confinement: strict # "strict" is preferred for store approval
  summary: "Virtual piano with 68 keys, 10+ studio instruments, and recording."
  publish:
    provider: snapStore  
appImage:
  artifactName: ${name}-${version}.${ext}
npmRebuild: false
publish:
  provider: generic
  url: https://example.com/auto-updates
electronDownload:
  mirror: https://npmmirror.com/mirrors/electron/
